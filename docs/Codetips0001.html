<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Kevin Cazelles" />


<title>Code tips 0001 (R)</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-1.1/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-1.1/highlight.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />
<link href="site_libs/ionicons-2.0.1/css/ionicons.min.css" rel="stylesheet" />
<link rel="stylesheet" href="css/academicons.css"/>
<link rel="stylesheet" href="css/creativecommons.css"/>
<link rel="stylesheet" href="css/perso.css"/>
<link rel="stylesheet" href="css/flag-icon.css"/>
<!-- favicon -->
<link rel="icon" type="image/png" href="img/favicon.png" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">LetiR</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="software.html">Software</a>
</li>
<li>
  <a href="talks.html">Talks</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Posts
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">R and graphs</li>
    <li>
      <a href="Rgraphpkgs.html">List of R graph packages</a>
    </li>
    <li>
      <a href="HylianStyle.html">Hylian Style</a>
    </li>
    <li>
      <a href="AcademiconsInR.html">Icons on you plots</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Ecology and R</li>
    <li>
      <a href="OnlineEcology-Species.html">Species</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Code tips</li>
    <li>
      <a href="Codetips0001.html">Code tips 0001</a>
    </li>
  </ul>
</li>
<li>
  <a href="maps.html">Maps</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="ion ion-plus-circled"></span>
     
    More
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Presentations</li>
    <li>
      <a href="pres/pres1.html">pres1</a>
    </li>
    <li>
      <a href="pres/presex.html">presex</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/letiR/letiR_website">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Code tips 0001 (R)</h1>
<h4 class="author"><em>Kevin Cazelles</em></h4>
<h4 class="date"><em>June 30, 2017 - last update on June 30, 2017</em></h4>

</div>


<p>Status: <img src="https://img.shields.io/badge/letiR-InRevision-blue.svg" /></p>
<div id="code-tips-you-said" class="section level2">
<h2>Code tips you said?</h2>
<p>This is the first blog post of a series aiming at presenting 5 – hopefully helpful – tips in each post pertaining to a specific programming langage. Tips provided could be of many kind: a function, a way of combining of functions, a single argument, a note about the philosophy of the langage and practical consequences, tricks to improve the way you code, etc. They should be short, meaning that the whole tip is described within no more than 5 lines of code of reasonable density (say 80 characters per line MAX). However the author may take the liberty of exemplifying his tips with code-chunks longer than 5 lines of codes. This should not affect the principle pertaining to the tip length.</p>
<p>When writing a tip, the author must think this way: “I should have known this <em>¶ø?!@~:(&amp;</em> piece of code long ago”. Note that some tips might be obvious for careful readers of documentations (God bless them for their wiseness), they would nonetheless help many other readers that suffer from reading documentations that are sometime fairly technical. By the way, there are doubtlessly many similar initiatives on the web, for instance on Twitter, there is a <a href="https://twitter.com/RLangTip">‘One R Tip a Day’ account</a>.</p>
<p>For the first post of the series, let’s introduce 5 <strong>R</strong> tips:</p>
<ol style="list-style-type: decimal">
<li>The %in% operator<br />
</li>
<li>The <code>paste0()</code> function<br />
</li>
<li>Using “\r” in <code>cat()</code><br />
</li>
<li>The <code>sprintf()</code> function<br />
</li>
<li>The <code>xaxs</code> and <code>yaxs</code> arguments of <code>par()</code></li>
</ol>
</div>
<div id="the-in-operator" class="section level2">
<h2>The ‘%in%’ operator</h2>
<p>I know this for a while, but I keep remembering how it eases my pain when I learnt how to use it. Let’s consider two vector <code>vecA</code> and <code>vecB</code>, the <code>vecA%in%vecB</code> returns a vector of logical of the length <code>vecA</code> stating whether the elements of <code>vecA</code> are in <code>vecB</code>:</p>
<pre class="r"><code>vecA &lt;- c(&quot;a&quot;, &quot;d&quot;, &quot;2&quot;, &quot;4&quot;, &quot;e&quot;, &quot;;&quot;)
vecB &lt;- letters # vector of lower case letters the Roman alphabet
vecA%in%vecB</code></pre>
<pre><code>## [1]  TRUE  TRUE FALSE FALSE  TRUE FALSE</code></pre>
<p>the i<sup>th</sup> element of the output vector is <code>TRUE</code> if the i<sup>th</sup> element of <code>vecA</code> is among the elements of <code>vecB</code>. Note that you can have a similar result calling the <code>intersect()</code> functions which returns elements that <code>vecA</code> and <code>vecB</code> are sharing.</p>
<pre class="r"><code>intersect(vecA, vecB)</code></pre>
<pre><code>## [1] &quot;a&quot; &quot;d&quot; &quot;e&quot;</code></pre>
<p>By the way, you should have a look to the documentation of <code>intersect()</code>.</p>
</div>
<div id="the-paste0-function" class="section level2">
<h2>The <code>paste0()</code> function</h2>
<p>I often concatenate strings. The natural way to do this is to use the <code>paste()</code> function. Let’s say I need to create a set of original file names such as: “myfile1”, “myfile2”, “myfile3”, etc. I can call <code>paste()</code> like so:</p>
<pre class="r"><code>paste(&quot;myfile&quot;, 1:7)</code></pre>
<pre><code>## [1] &quot;myfile 1&quot; &quot;myfile 2&quot; &quot;myfile 3&quot; &quot;myfile 4&quot; &quot;myfile 5&quot; &quot;myfile 6&quot;
## [7] &quot;myfile 7&quot;</code></pre>
<p>BUT, there is a annoying space between “myfile” and the number, to remove the space, <code>sep</code> argument is needed:</p>
<pre class="r"><code>paste(&quot;myfile&quot;, 1:3, sep=&quot;&quot;)</code></pre>
<pre><code>## [1] &quot;myfile1&quot; &quot;myfile2&quot; &quot;myfile3&quot;</code></pre>
<p>UNLESS you use the <code>paste0()</code> that is the version of <code>paste()</code> with the desired default parameters:</p>
<pre class="r"><code>paste0(&quot;myfile&quot;, 1:3)</code></pre>
<pre><code>## [1] &quot;myfile1&quot; &quot;myfile2&quot; &quot;myfile3&quot;</code></pre>
<p>I know… this means you’ll save 5 previous characters each time you call <code>paste0()</code>!</p>
</div>
<div id="using-argument-r-in-cat" class="section level2">
<h2>Using argument ‘\r’ in <code>cat()</code></h2>
<p><em>Note that for this tip, you should execute the code-chunk in your own R console</em></p>
<p>When programming we often need to monitor what we are doing especially for time-consuming calculation. Using <code>cat()</code> with all its default is very helpful to report information on progress:</p>
<pre class="r"><code>for (i in 1:10) {
  cat(&quot;iteration n°&quot;, i, &quot;\n&quot;)
}</code></pre>
<p>Here <code>&quot;\n&quot;</code> is what breaks the line! Instead of breaking the line, we can erase the line, i.e. using <code>&quot;\r&quot;</code>:</p>
<pre class="r"><code>for (i in 1:10) {
  Sys.sleep(.25) # I added a pause so you can see what&#39;s happening
  cat(&quot;iteration n°&quot;, i, &quot;\r&quot;)
}</code></pre>
<p>I hope this gives you some ideas :). If you are thinking “where the <em>!&amp;)@(</em> is he going with this!” let me give you two extra way to monitor a for loop:</p>
<ol style="list-style-type: decimal">
<li>Use percentage:</li>
</ol>
<pre class="r"><code>nmx &lt;- 222
for (i in 1:nmx) {
  Sys.sleep(.01) # replace it by what you are doing
  cat(&quot;==&gt;&quot;, format(100*i/nmx, digits=4), &quot;%&quot;, &quot;\r&quot;)
}</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Create you own progress bar:</li>
</ol>
<pre class="r"><code>nmx &lt;- 222
sz &lt;- 60
for (i in 1:nmx) {
  Sys.sleep(.01) # replace it by what you are doing
  nb &lt;- floor(sz*i/nmx)
  pgr &lt;- paste(rep(c(&quot;=&quot;,&quot; &quot;), c(nb, sz-nb)), collapse=&quot;&quot;)
  cat(&quot;|&quot;, pgr, &quot;| &quot;, &quot;\r&quot;)
}</code></pre>
<p>I hope you like this! Otherwise, stick to use <code>getTxtProgressBar()</code> and <code>setProgressBar()</code> functions, but I swear you are missing something.</p>
</div>
<div id="the-sprintf-function" class="section level2">
<h2>The <code>sprintf()</code> function</h2>
<p>The function is a wrapper for a well-known C function <code>sprintf()</code>. There are so much to say about it and I won’t (so please have a careful look at the documentation) but I think it is worth a tip to present the most used features of this function.</p>
<p>The first argument of <code>sprintf()</code> is a string that includes tag to be replaced by the extra arguments. A tag starts with a <code>%</code>, is followed by a couple of optional characters tuning the display and ends with a letter specifying the nature of the variable(s) to be displayed (number or string). The most common letters are:</p>
<ul>
<li>“d” for integer value;<br />
</li>
<li>“f” for double precision value;</li>
<li>“s” for strings.</li>
</ul>
<p>The most common options are:</p>
<ul>
<li>“n”, an integer values specifying the width of the field;</li>
<li>“0” indicates whether zero-padding should be used;<br />
</li>
<li>“.m” where n is an integer.</li>
</ul>
<p>That being said, to be as clear as possible, let me exemplify!</p>
<ol style="list-style-type: decimal">
<li>Different kind of variables:</li>
</ol>
<pre class="r"><code>sprintf(&quot;%d&quot;, 1)
sprintf(&quot;%f&quot;, pi)
sprintf(&quot;%s&quot;, &quot;A&quot;)</code></pre>
<pre><code>## [1] &quot;1&quot;
## [1] &quot;3.141593&quot;
## [1] &quot;A&quot;</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Combine different variables:</li>
</ol>
<pre class="r"><code>sprintf(&quot;An integer: %d, a double: %f, a string: %s&quot;, 1, pi, &quot;A&quot;)</code></pre>
<pre><code>## [1] &quot;An integer: 1, a double: 3.141593, a string: A&quot;</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Tune the field width:</li>
</ol>
<pre class="r"><code>sprintf(&quot;%10f&quot;, pi)</code></pre>
<pre><code>## [1] &quot;  3.141593&quot;</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Zero-padding:</li>
</ol>
<pre class="r"><code>sprintf(&quot;%010f&quot;, pi)</code></pre>
<pre><code>## [1] &quot;003.141593&quot;</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Tune the precision:</li>
</ol>
<pre class="r"><code>sprintf(&quot;%.50f&quot;, pi)</code></pre>
<pre><code>## [1] &quot;3.14159265358979311599796346854418516159057617187500&quot;</code></pre>
<p>Pretty cool, isn’t it? To conclude two questions. Question 1: do you remember the file naming example using to showcase <code>paste0()</code>? I assume your answer if yes. Let’s say you now have more than 100 files to name and you want to use zero-padding and a constant field width of 3 (e.g. “myfile001”, “myfile010”, “myfile100”). This leads me to question 2: what do you do? =&gt; Go <code>sprintf()</code>!</p>
<pre class="r"><code>paste0(&quot;myfile&quot;, sprintf(&quot;%03d&quot;, c(1,10,100)))</code></pre>
<pre><code>## [1] &quot;myfile001&quot; &quot;myfile010&quot; &quot;myfile100&quot;</code></pre>
</div>
<div id="the-xaxs-and-yaxs-arguments-of-par" class="section level2">
<h2>The <code>xaxs</code> and <code>yaxs</code> arguments of <code>par()</code></h2>
<p>This is also something I learnt years ago and keep using for almost all my plots ever since. Default values of graphical parameters generate plot that add and extra 4% to the axes limits. This is actually useful to ensure that all graphical symbols are entirely displayed. However, I prefer using round values as axes limits and handling myself their values so that all symbols stay visible. In order to get rid of the extra 4% added on the x-axis (y-axis), you have to pass <code>xaxs=&quot;i&quot;</code> (<code>yaxs=&quot;i&quot;</code>) to the <code>par()</code> function. I compare below a plot using the default parameters’ values and the same plot using the tip:</p>
<pre class="r"><code>par(mfrow=c(1,2), bty=&quot;l&quot;)
plot(0:10, 0:10, pch=20)     
par(xaxs=&quot;i&quot;, yaxs=&quot;i&quot;)   
plot(0:10, 0:10, pch=20)   </code></pre>
<p><img src="Codetips0001_files/figure-html/xaxsYaxs-1.png" width="912" /></p>
<p>Can you the see the difference? Let me add two extra code lines to stress the differences out.</p>
<pre class="r"><code>par(mfrow=c(1,2), bty=&quot;l&quot;)
plot(0:10, 0:10, pch=20)  
abline(v=c(0,10), h=c(0,10), col=2)   
par(xaxs=&quot;i&quot;, yaxs=&quot;i&quot;)   
plot(0:10, 0:10, pch=20)   
abline(v=c(0,10), h=c(0,10), col=2)</code></pre>
<p><img src="Codetips0001_files/figure-html/xaxsYaxsV2-1.png" width="912" /></p>
<p><br/></p>
<p><strong>That’s all folks!</strong></p>
<p><br/></p>
</div>

<br/><br/>

<div class="footer">
  Copyright &copy; 2017 LetiR. All rights reserved.   Made with <i class="ion-heart"></i>
    with <a href="http://rmarkdown.rstudio.com/rmarkdown_websites.html">
    Rmarkdown</a>. <br/>
  Content on this site is licensed under
  <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
      <i class='cc cc-cc-circle cc-1x'></i> <i class='cc cc-by-circle cc-1x'></i>
      <i class='cc cc-nc-circle cc-1x'></i> <i class='cc cc-sa-circle cc-1x'></i>
  </a> unless otherwise specified. <br/>
  Last update: 30-06-2017. Code source available on
    <a href="https://github.com/letiR/letiR_website">
      <i class='fa fa-github fa-1x'></i></a>
</div>

<!-- jQuery -->
<script>
  jQuery("h1.title").append("<hr class='hline_color'/>");
  jQuery("h1.title").before("<br/>");
  jQuery(".section.level2").before("<br/><br/>");
</script>

<!-- GoogleAnalytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-97559589-1', 'auto');
  ga('send', 'pageview');
</script>
<br/><br/><br/><br/><br/><br/>
<!-- disqus -->
 <div id="disqus_thread" class="standardPadding"></div>
    <script type="text/javascript">
      $(document).ready(function() {
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'LetiR'; // required: replace example with your forum shortname
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            // create disqus script tag
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            // determine container
            var container = document.getElementsByTagName('body')[0] || document.getElementsByTagName('head')[0];
            // append script tag enclosed by google indexing suppression comment
            container.appendChild(document.createComment('googleoff: all'));
            container.appendChild(dsq);
            container.appendChild(document.createComment('googleon: all'));
        })();
      });
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
