<!DOCTYPE html>
<html lang="en-us">

    <head>

        <title>Fish and tips 01 {R}</title>

        <style>

    html body {
        font-family: Raleway, sans-serif;
        background-color: white;
    }

    :root {
        --accent: #3fb3b2;
        --border-width:  5px ;
    }

</style>


<link rel="stylesheet" href="../../../../css/main.css">





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">


 <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css"> 


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
 


    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

    

    <script>hljs.initHighlightingOnLoad();</script>







<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
 <meta name="generator" content="Hugo 0.25.1" />

        <meta charset="utf-8">

        <meta name="viewport" content="width=device-width, initial-scale=1">

    </head>

    <body>

        <nav class="navbar navbar-default navbar-fixed-top">

            <div class="container">

                <div class="navbar-header">

                    <a class="navbar-brand visible-xs" href="#">Fish and tips 01 {R}</a>

                    <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                </div>

                <div class="collapse navbar-collapse">

                    
                        <ul class="nav navbar-nav">
                            
                                <li><a href="../../../../">Home</a></li>
                            
                                <li><a href="../../../../about/">About</a></li>
                            
                                <li><a href="../../../../post/">Posts</a></li>
                            
                                <li><a href="../../../../softwares/">Softwares</a></li>
                            
                                <li><a href="../../../../tips/">Tips</a></li>
                            
                        </ul>
                    

                    
                        <ul class="nav navbar-nav navbar-right">
                            
                                <li class="navbar-icon"><a href="https://github.com/inSileco/"><i class="fa fa-github"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://twitter.com/inSileco/"><i class="fa fa-twitter"></i></a></li>
                            
                        </ul>
                    

                </div>

            </div>

        </nav>


<img class="full-width" width="100%" src="../../../../img/banner2.png"></img>

<div class="container">
<div class="col-sm-12">

    <div class="item">

    

        <h2><a href="../../../../2017/06/30/fish-and-tips-01-r/">Fish and tips 01 {R}</a></h2>

        <h4><a href="../../../../about/">Kevin Cazelles</a></h4>

        <h5>June 30, 2017</h5>

         <kbd class="item-tag">R</kbd>  <kbd class="item-tag">tips</kbd> 

    

</div>


    <br> <div class="text-justify"><div id="code-tips-you-said" class="section level2">
<h2>Code tips you said?</h2>
<p>Ever tumbled on a code chunk that made you say: “I should have known this <em>¶ø?!@~:&amp;</em> piece of code long ago!”? Chances are you have, frustratingly, just like we have, and on multiple occasions too.</p>
<p>In comes <em>blogPostSeriesName</em>!</p>
<p><em>blogPostSeriesName</em> is a series of blog posts that each present 5 – hopefully helpful – coding tips for a specific programming language.</p>
<p>Posts should be short (<em>i.e.</em> no more than 5 lines of code, max 80 characters per line, except when appropriate) and provide tips of many kind: a function, a way of combining of functions, a single argument, a note about the philosophy of the language and practical consequences, tricks to improve the way you code, good practices, etc.</p>
<p>Note that while some tips might be obvious for careful documentation readers (God bless them for their wisdom), almost all the tips we present constituted some sort of eureka moments for us.</p>
<p>By the way, there are undoubtedly similar initiatives on the web (<em>e.g.</em> <a href="https://twitter.com/RLangTip">‘One R Tip a Day’ account</a>). Also, feel free to <a href="mailto:kevin.cazelles@gmail.com">send us</a> tip ideas or a post of code tips of your own which we will be happy to incorporate to <em>blogPostSeriesName</em>!</p>
<p>Enjoy and get ready to frustratingly appreciate our tips!</p>
<hr />
</div>
<div id="blogpostseriesname-0001" class="section level2">
<h2><em>blogPostSeriesName</em> 0001</h2>
<p>For the first post of the series, let’s introduce 5 <strong>R</strong> tips:</p>
<ol style="list-style-type: decimal">
<li>The %in% operator<br />
</li>
<li>The <code>paste0()</code> function<br />
</li>
<li>Using “\r” in <code>cat()</code><br />
</li>
<li>The <code>sprintf()</code> function<br />
</li>
<li>The <code>xaxs</code> and <code>yaxs</code> arguments of <code>par()</code></li>
</ol>
</div>
<div id="the-in-operator" class="section level2">
<h2>The ‘%in%’ operator</h2>
<p>I have known this for a while, but I keep remembering how it eases my pain when I learned how to use it. Let’s consider two vector <code>vecA</code> and <code>vecB</code>, the <code>vecA%in%vecB</code> returns a vector of logical of the length <code>vecA</code> stating whether the elements of <code>vecA</code> are in <code>vecB</code>:</p>
<pre class="r"><code>vecA &lt;- c(&quot;a&quot;, &quot;d&quot;, &quot;2&quot;, &quot;4&quot;, &quot;e&quot;, &quot;;&quot;)
vecB &lt;- letters # vector of lower case letters the Roman alphabet
vecA%in%vecB</code></pre>
<pre><code>## [1]  TRUE  TRUE FALSE FALSE  TRUE FALSE</code></pre>
<p>the i<sup>th</sup> element of the output vector is <code>TRUE</code> if the i<sup>th</sup> element of <code>vecA</code> is among the elements of <code>vecB</code>. Note that you can have a similar result calling the <code>intersect()</code> functions which returns elements that <code>vecA</code> and <code>vecB</code> are sharing.</p>
<pre class="r"><code>intersect(vecA, vecB)</code></pre>
<pre><code>## [1] &quot;a&quot; &quot;d&quot; &quot;e&quot;</code></pre>
<p>By the way, you should have a look to the documentation of <code>intersect()</code>.</p>
</div>
<div id="the-paste0-function" class="section level2">
<h2>The <code>paste0()</code> function</h2>
<p>I often concatenate strings. The natural way to do this is to use the <code>paste()</code> function. Let’s say I need to create a set of original file names such as: “myfile1”, “myfile2”, “myfile3”, etc. I can call <code>paste()</code> like so:</p>
<pre class="r"><code>paste(&quot;myfile&quot;, 1:7)</code></pre>
<pre><code>## [1] &quot;myfile 1&quot; &quot;myfile 2&quot; &quot;myfile 3&quot; &quot;myfile 4&quot; &quot;myfile 5&quot; &quot;myfile 6&quot;
## [7] &quot;myfile 7&quot;</code></pre>
<p>BUT, there is a annoying space between “myfile” and the number, to remove the space, <code>sep</code> argument is needed:</p>
<pre class="r"><code>paste(&quot;myfile&quot;, 1:3, sep=&quot;&quot;)</code></pre>
<pre><code>## [1] &quot;myfile1&quot; &quot;myfile2&quot; &quot;myfile3&quot;</code></pre>
<p>UNLESS you use the <code>paste0()</code> that is the version of <code>paste()</code> with the desired default parameters:</p>
<pre class="r"><code>paste0(&quot;myfile&quot;, 1:3)</code></pre>
<pre><code>## [1] &quot;myfile1&quot; &quot;myfile2&quot; &quot;myfile3&quot;</code></pre>
<p>I know… this means you’ll save 5 previous characters each time you call <code>paste0()</code>!</p>
</div>
<div id="using-argument-r-in-cat" class="section level2">
<h2>Using argument ‘\r’ in <code>cat()</code></h2>
<p><em>Note that for this tip, you should execute the code-chunk in your own R console</em></p>
<p>When programming we often need to monitor what we are doing, especially for<br />
time-consuming calculation. Using <code>cat()</code> with all its default is very helpful to report information on progress:</p>
<pre class="r"><code>for (i in 1:10) {
  cat(&quot;iteration n°&quot;, i, &quot;\n&quot;)
}</code></pre>
<p>Here <code>&quot;\n&quot;</code> is what breaks the line! Instead of breaking the line, we can erase the line, i.e. using <code>&quot;\r&quot;</code>:</p>
<pre class="r"><code>for (i in 1:10) {
  Sys.sleep(.25) # I added a pause so you can see what&#39;s happening
  cat(&quot;iteration n°&quot;, i, &quot;\r&quot;)
}</code></pre>
<p>I hope this gives you some ideas :). If you are thinking “where the <em>!&amp;)@(</em> is he going with this!” let me give you two extra way to monitor a for loop:</p>
<ol style="list-style-type: decimal">
<li>Use percentage:</li>
</ol>
<pre class="r"><code>nmx &lt;- 222
for (i in 1:nmx) {
  Sys.sleep(.01) # replace it by what you are doing
  cat(&quot;==&gt;&quot;, format(100*i/nmx, digits=4), &quot;%&quot;, &quot;\r&quot;)
}</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Create you own progress bar:</li>
</ol>
<pre class="r"><code>nmx &lt;- 222
sz &lt;- 60
for (i in 1:nmx) {
  Sys.sleep(.01) # replace it by what you are doing
  nb &lt;- floor(sz*i/nmx)
  pgr &lt;- paste(rep(c(&quot;=&quot;,&quot; &quot;), c(nb, sz-nb)), collapse=&quot;&quot;)
  cat(&quot;|&quot;, pgr, &quot;| &quot;, &quot;\r&quot;)
}</code></pre>
<p>I hope you like this! Otherwise, stick to use <code>getTxtProgressBar()</code> and <code>setProgressBar()</code> functions, but I swear you are missing something.</p>
</div>
<div id="the-sprintf-function" class="section level2">
<h2>The <code>sprintf()</code> function</h2>
<p>The function is a wrapper for a well-known C function <code>sprintf()</code>. There are so much to say about it and I won’t (so please have a careful look at the documentation) but I think it is worth a tip to present the most used features of this function.</p>
<p>The first argument of <code>sprintf()</code> is a string that includes tag to be replaced by the extra arguments. A tag starts with a <code>%</code>, is followed by a couple of optional characters tuning the display and ends with a letter specifying the nature of the variable(s) to be displayed (number or string). The most common letters are:</p>
<ul>
<li>“d” for integer value;<br />
</li>
<li>“f” for double precision value;</li>
<li>“s” for strings.</li>
</ul>
<p>The most common options are:</p>
<ul>
<li>“n”, an integer values specifying the width of the field;</li>
<li>“0” indicates whether zero-padding should be used;<br />
</li>
<li>“.m” where n is an integer.</li>
</ul>
<p>That being said, to be as clear as possible, let me exemplify!</p>
<ol style="list-style-type: decimal">
<li>Different kind of variables:</li>
</ol>
<pre class="r"><code>sprintf(&quot;%d&quot;, 1)
sprintf(&quot;%f&quot;, pi)
sprintf(&quot;%s&quot;, &quot;A&quot;)</code></pre>
<pre><code>## [1] &quot;1&quot;
## [1] &quot;3.141593&quot;
## [1] &quot;A&quot;</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Combine different variables:</li>
</ol>
<pre class="r"><code>sprintf(&quot;An integer: %d, a double: %f, a string: %s&quot;, 1, pi, &quot;A&quot;)</code></pre>
<pre><code>## [1] &quot;An integer: 1, a double: 3.141593, a string: A&quot;</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Tune the field width:</li>
</ol>
<pre class="r"><code>sprintf(&quot;%10f&quot;, pi)</code></pre>
<pre><code>## [1] &quot;  3.141593&quot;</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Zero-padding:</li>
</ol>
<pre class="r"><code>sprintf(&quot;%010f&quot;, pi)</code></pre>
<pre><code>## [1] &quot;003.141593&quot;</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Tune the precision:</li>
</ol>
<pre class="r"><code>sprintf(&quot;%.50f&quot;, pi)</code></pre>
<pre><code>## [1] &quot;3.14159265358979311599796346854418516159057617187500&quot;</code></pre>
<p>Pretty cool, isn’t it? To conclude two questions. Question 1: do you remember the file naming example using to showcase <code>paste0()</code>? I assume your answer if yes. Let’s say you now have more than 100 files to name and you want to use zero-padding and a constant field width of 3 (e.g. “myfile001”, “myfile010”, “myfile100”). This leads me to question 2: what do you do? =&gt; Go <code>sprintf()</code>!</p>
<pre class="r"><code>paste0(&quot;myfile&quot;, sprintf(&quot;%03d&quot;, c(1,10,100)))</code></pre>
<pre><code>## [1] &quot;myfile001&quot; &quot;myfile010&quot; &quot;myfile100&quot;</code></pre>
</div>
<div id="the-xaxs-and-yaxs-arguments-of-par" class="section level2">
<h2>The <code>xaxs</code> and <code>yaxs</code> arguments of <code>par()</code></h2>
<p>This is also something I learnt years ago and keep using for almost all my plots ever since. Default values of graphical parameters generate plot that add and extra 4% to the axes limits. This is actually useful to ensure that all graphical symbols are entirely displayed. However, I prefer using round values as axes limits and handling myself their values so that all symbols stay visible. In order to get rid of the extra 4% added on the x-axis (y-axis), you have to pass <code>xaxs=&quot;i&quot;</code> (<code>yaxs=&quot;i&quot;</code>) to the <code>par()</code> function. I compare below a plot using the default parameters’ values and the same plot using the tip:</p>
<pre class="r"><code>par(mfrow=c(1,2), bty=&quot;l&quot;)
plot(0:10, 0:10, pch=20)     
par(xaxs=&quot;i&quot;, yaxs=&quot;i&quot;)   
plot(0:10, 0:10, pch=20)   </code></pre>
<p><img src="../../../../post/19-07-2017-FT01_files/figure-html/xaxsYaxs-1.png" width="912" /></p>
<p>Can you the see the difference? Let me add two extra code lines to stress the differences out.</p>
<pre class="r"><code>par(mfrow=c(1,2), bty=&quot;l&quot;)
plot(0:10, 0:10, pch=20)  
abline(v=c(0,10), h=c(0,10), col=2)   
par(xaxs=&quot;i&quot;, yaxs=&quot;i&quot;)   
plot(0:10, 0:10, pch=20)   
abline(v=c(0,10), h=c(0,10), col=2)</code></pre>
<p><img src="../../../../post/19-07-2017-FT01_files/figure-html/xaxsYaxsV2-1.png" width="912" /></p>
<p><br/></p>
<p><strong>That’s all folks, until next time!</strong></p>
<p><br/></p>
</div>
</div>

    
    

    

</div>
</div>

        <footer>

            <p class="copyright text-muted">&copy; All rights reserved. Powered by <a href="https://gohugo.io">Hugo</a> and <a href="https://github.com/calintat/minimal">Minimal</a>.</p>

        </footer>

    </body>

</html>

